(()=>{const e=(e,t)=>{const n=document.getElementById(`input-${e}`),o=document.getElementById(e);if(n.value="",n.addEventListener("input",function(e){n.value=e.target.value.replace("$/inf","∞"),o.textContent=e.target.value}),t){const t=document.getElementById(`${e}-stroke`);n.addEventListener("input",function(e){t.textContent=e.target.value})}},t=(e,t)=>{const n=document.getElementById(`input-${e}`);n.value="",n.addEventListener("input",function(t){n.value=t.target.value.replace("$/inf","∞"),document.getElementById(`${e}-${fe.value}`).textContent=t.target.value}),t&&n.addEventListener("input",function(t){document.getElementById(`${e}-stroke-${fe.value}`).textContent=t.target.value})},n=e=>{let t=e[0];for(let n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t},o=()=>{if(we.length<=0)return;let e=we.indexOf(Number(fe.value));const t=document.getElementById(`ability-element-${fe.value}`),n=document.getElementById(`ability-option-${fe.value}`);t.remove(),n.remove(),we.splice(e,1),0!=we.length&&i(),l()},i=()=>{const e=document.getElementById(`ability-icon-button-${fe.value}`),t=document.getElementById(`ability-name-${fe.value}`),n=document.getElementById(`ability-description-${fe.value}`),o=document.getElementById(`bloontonium-cost-${fe.value}`);Te.value=t.textContent,xe.value=n.textContent,ke.value=o.textContent,ve.checked=e.src.includes("Passive")},l=()=>{const e=0==we.length;be.classList.toggle("disabled-text",e),Te.disabled=e,xe.disabled=e,ve.disabled=e,ke.disabled=e,Ce.disabled=e,fe.disabled=e,Be.disabled=e,Ie.disabled=e},a=()=>{X.length>0&&(X[X.length-1].remove(),X.pop(),_.pop())},d=(e,t)=>{const n=document.getElementById(`${e}-dropdown`),o=document.getElementById(`${e}`);n.value="None",n.addEventListener("change",function(e){o.src=`/src/img/${t}/${n.value}.png`})},r=(e,t)=>{const n=document.getElementById(e);n.value=0,n.addEventListener("input",function(e){ze[t]=parseFloat(n.value),P()})},s=(e,t)=>{const n=document.getElementById(e);n.addEventListener("input",function(e){ze[t]=parseFloat(n.value*We/100),P()})};var c=250;const m=(e,t,n)=>{let o=t;for(e.style.fontSize=`${o}em`;e.clientHeight>n;)o-=1/16,e.style.fontSize=`${o}em`;return o},u=(e,t)=>{e.style.visibility=t?"visible":"hidden"},y=e=>{u($e,e.damageVisibility),u(Oe,e.damageVisibility),u(Ae,e.ammoVisibility),u(Se,e.ammoVisibility),u(Pe,e.delayVisibility),u(Ve,e.delayVisibility)},g={monkey:{borderSrc:"/src/img/Border/MonkeyCardBorder.png",damageSrc:"/src/img/CardIcon/MonkeyDamage.png",imgHeight:"96%",imgWidth:"92%",damageLeft:"90%",damageTop:"4%",imgTransform:"translate(-50%, 2.2%)",imgBorderRadius:"10%",borderOffset:"translate(0%, -0.8%)",imgObjFit:"cover",delayTop:"36%",delayLeft:"95%",delayFontSize:"4em",classPinLeft:"7%",classPinTop:"24%",heroPinLeft:"50%",heroPinTop:"0%",titleBottom:"45.25%",classTop:"57%",descriptionTop:"74%",damageVisibility:!0,ammoVisibility:!0,delayVisibility:!0},bloon:{borderSrc:"/src/img/Border/BloonCardBorder.png",damageSrc:"/src/img/CardIcon/BloonDamage.png",imgHeight:"55%",imgWidth:"75%",damageLeft:"88%",damageTop:"4%",imgTransform:"translate(-50%, -7%)",borderOffset:"translate(0%, -7.25%)",classPinLeft:"9%",classPinTop:"39%",heroPinLeft:"89%",heroPinTop:"39.5%",imgBorderRadius:"50%",imgObjFit:"fill",delayTop:"22.25%",delayLeft:"94%",delayFontSize:"6em",titleBottom:"42.25%",classTop:"60%",descriptionTop:"77.5%",damageVisibility:!0,ammoVisibility:!1,delayVisibility:!0},power:{borderSrc:"/src/img/Border/PowerCardBorder.png",imgHeight:"55%",imgWidth:"86%",imgTransform:"translate(-51%, -7%)",borderOffset:"translate(0%, -7.25%)",classPinLeft:"9%",classPinTop:"39%",heroPinLeft:"89%",heroPinTop:"39.5%",imgBorderRadius:"41%",imgObjFit:"fill",titleBottom:"42.25%",classTop:"60%",descriptionTop:"77.5%",damageVisibility:!1,ammoVisibility:!1,delayVisibility:!1},hero:{isHero:!0}},p={Armor:{Title:"Armor {VALUE}",OptionTitle:"Armor",Description:"Reduce damage recieved by {VALUE}"},ArmorPiercing:{Title:"Armor Piercing",Description:"Hit Bloons lose all Armor"},Defender:{Title:"Defender +{VALUE}",OptionTitle:"Defender",Description:"Can defend on opponent's turn, has +{VALUE} damage on opponent's turn."},DoubleAttack:{Title:"Double Attack",Description:"Attacks twice."},TripleAttack:{Title:"Triple Attack",Description:"Attacks three times."},Doomed:{Title:"Doomed",Description:"This Monkey will be removed at the start of its next turn."},Immobile:{Title:"Immobile",Description:"Cannot increase or decrease delay. Cannot attack"},MustPop:{Title:"Must Pop",Description:"Monkey must attack this Bloon before others"},OnDamaged:{Title:"On Damaged",Description:"Triggers on losing health from any source"},OnDestroyed:{Title:"On Destroyed",Description:"Triggers when Bloon is Popped (by damage or effect) or when it hits opposing Hero."},OnFire:{Title:"On Fire",Description:"Will take 30 damage at the end of its turn and before attacking."},OnLeak:{Title:"On Leak",Description:"Triggers when a bloon attacks a hero (after defenders have acted)."},OnPlay:{Title:"On Play",Description:"Triggers when card is played"},OnPopped:{Title:"On Popped",Description:"Triggers when Bloon is Popped (by damage or effect). Does not trigger if Bloon hits opposing Hero."},OnAttack:{Title:"On Attack",Description:"Triggers when this Monkey attacks."},OnReload:{Title:"On Reload",Description:"Triggers when this Monkey reloads."},OnReplace:{Title:"On Replace",Description:"Triggers when this Monkey is replaced by another Monkey."},OnTurnStart:{Title:"On Turn Start",Description:"Triggers at start of turn"},OnTurnEnd:{Title:"On Turn End",Description:"Triggers once turn has ended"},Pick:{Title:"Pick {VALUE}",OptionTitle:"Pick",Description:"Look at the next {VALUE} cards in your deck. Choose one and add it to your hand. Other cards go to the bottom of your deck."},Shield:{Title:"Shield {VALUE}",OptionTitle:"Shield",Description:"Shield will block {VALUE} incoming damage."},SplashDamage:{Title:"Splash Damage",Description:"Also deals damage to Bloons on either side of the target"},Stunned:{Title:"Stunned",Description:"Monkey can't attack or reload until stun wears off. Bloon delay does not reduce at end of turn."},Temporary:{Title:"Temporary",Description:"Is removed at end of turn after ammo reaches 0."},TemporaryAmmo:{Title:"Temporary Ammo",Description:"Extra ammo that is removed at the start of the turn"},Unique:{Title:"Unique",Description:"You can only have one copy of this card."},AcidPool:{Title:"Acid Pool",Description:"Deals 30 damage to any Bloon ending its turn on it. Lasts 2 turns"},StrongAcidPool:{Title:"Strong Acid Pool",Description:"Deals 50 damage to any Bloon ending its turn on it. Lasts 2 turns"},ZeroGold:{Title:"Zero Gold",Description:"Triggers an additional effect if you have 0 Gold"}};function h(e,t,n="/src/img/None.png"){if(e){const n=document.createElement("img");n.crossOrigin="anonymous",n.src=e,n.onload=function(){t.src=n.src}}else t.src=n}function b(e,t,n,o="/src/img/None.png"){if(e){const o=document.createElement("img");o.crossOrigin="anonymous",o.src=e,o.onload=function(){t.src=o.src,n("Loaded Image")}}else t.src=o,n("Loaded Nothing")}const E=e=>{for(;X.length>0;)a();for(let t=0;t<e.length;t++){let n=e[t].keyword,o=e[t].value,i=p[n].Description.replace("{VALUE}",o);re.textContent=i;let l=p[n].Title.replace("{VALUE}",o);se.textContent=l,me.textContent=l,de.src=`/src/img/Keyword/${n}.png`;let a=ce.cloneNode(!0);a.style.display="flex";let d=Q.appendChild(a);X.push(d),_.push({keyword:n,value:o})}},f=()=>{const e=[];for(let n=0;n<we.length;n++){var t={Name:"",Description:"",Cost:"",Button:"",Icon:""};for(let e in t){const o=`${he[e]}-${we[n]}`,i=document.getElementById(o);"Button"==e||"Icon"==e?(console.log(i.id),t[e]=i.src):t[e]=i.textContent}e.push(t)}return e},B=e=>document.getElementById(e).value,I=new Event("input"),v=new Event("change"),T=(e,t)=>{const n=document.getElementById(e);n.value=t,n.dispatchEvent(I),n.dispatchEvent(v)},x=e=>document.getElementById(e).checked,k=(e,t)=>{const n=document.getElementById(e);n.checked=t,n.dispatchEvent(I)},C=e=>{const t=g[U=e];if(t.isHero)return j.style.display="none",z.style.display="none",K.style.display="",void(q.style.display="");j.style.display="",z.style.display="",K.style.display="none",q.style.display="none",m(Ne,3.2,c="monkey"==e?250:221);const n=document.getElementById("title-text-container"),o=document.getElementById("class-text-container"),i=document.getElementById("description-text");n.style.bottom=t.titleBottom,o.style.top=t.classTop,i.style.top=t.descriptionTop,W.src=t.borderSrc,W.style.transform=t.borderOffset,t.damageSrc&&($e.src=t.damageSrc,$e.style.top=t.damageTop,$e.style.left=t.damageLeft,Oe.style.top=t.damageTop,Oe.style.left=t.damageLeft),Ke.style.height=t.imgHeight,Ke.style.width=t.imgWidth,Ke.style.transform=t.imgTransform,Ke.style.borderRadius=t.imgBorderRadius,Ke.style.ObjFit=t.imgObjFit,Pe.style.top=t.delayTop,Pe.style.left=t.delayLeft,Ve.style.top=t.delayTop,Ve.style.left=t.delayLeft,Ve.style.fontSize=t.delayFontSize,He.style.left=t.classPinLeft,He.style.top=t.classPinTop,Re.style.left=t.heroPinLeft,Re.style.top=t.heroPinTop,y(t)};var w=!0;const D=()=>{w!=F.checked&&(ee.classList.toggle("disabled-text"),w=!w),g.monkey.damageVisibility=$(),g.monkey.ammoVisibility=w,g.monkey.delayVisibility=$(),te.disabled=!$(),ne.disabled=!w,oe.disabled=!$(),y(g[U])},L=document.getElementById("temporary-toggle"),$=()=>!L.checked&&F.checked,A=()=>{const e=document.getElementById("uploadImgModal");u(e,!1)};window.onclick=function(e){const t=document.getElementById("uploadImgModal");e.target==t&&A()};const P=()=>{null!=Fe&&null==je&&(je=window.setTimeout(function(){document.getElementById("ratio-toggle").checked?O():S(),Ke.src=Ue.toDataURL(),je=null},125))},O=()=>{Ue.width=ze.w,Ue.height=ze.h,Me.drawImage(Fe,ze.x,-ze.y,ze.w,ze.h)},S=()=>{Ue.width=512,Ue.height=512,widthDifference=ze.w/512-1,heightDifference=ze.h/512-1;let e=256*widthDifference,t=256*heightDifference;Me.drawImage(Fe,ze.x-e,-ze.y-t,ze.w,ze.h)},V=e=>{document.getElementById("img-thumbnail").src=e},N=(e,t)=>{let n;return n=e?document.getElementById("hero-name").textContent:document.getElementById("title-text").textContent,t?R(n).replace(/ /gi,"-").toLowerCase().substring(0,50):n},R=e=>e.replace(/[^\w\s]/gi,"").trim(),H=(e,t)=>{var n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)};var U="monkey";const M=document.getElementById("copies-slider"),F=document.getElementById("damage-checkbox"),j=document.getElementById("card-form"),K=document.getElementById("card-form-hero"),W=document.getElementById("card-border"),z=(document.querySelectorAll(".card-type-button"),document.getElementById("card-justifier")),q=document.getElementById("hero-justifier"),G=document.getElementById("card-container"),J=document.getElementById("detail-toggle"),Z=document.getElementById("detail-box"),Y=document.getElementById("detail-box-hero"),Q=document.getElementById("keyword-holder"),X=(document.getElementById("flavor-text"),[]),_=[],ee=document.getElementById("enable-damage-elements"),te=document.getElementById("input-damage-text"),ne=document.getElementById("input-ammo-text"),oe=document.getElementById("input-delay-text"),ie=document.getElementById("enable-detail-elements"),le=document.getElementById("keyword-dropdown"),ae=document.getElementById("input-flavor-text"),de=document.getElementById("keyword-img"),re=document.getElementById("keyword-description"),se=document.getElementById("keyword-title"),ce=document.getElementById("keyword-element"),me=document.getElementById("keyword-title-stroke"),ue=document.getElementById("keyword-value"),ye=document.getElementById("add-keyword"),ge=document.getElementById("remove-keyword"),pe={Element:document.getElementById("ability-element"),Button:document.getElementById("ability-icon-button"),Icon:document.getElementById("ability-icon"),Name:document.getElementById("ability-name"),NameStroke:document.getElementById("ability-name-stroke"),NameContainer:document.getElementById("ability-name-container"),Description:document.getElementById("ability-description"),Cost:document.getElementById("bloontonium-cost"),CostStroke:document.getElementById("bloontonium-cost-stroke")},he={Element:"ability-element",Button:"ability-icon-button",Icon:"ability-icon",Name:"ability-name",NameStroke:"ability-name-stroke",NameContainer:"ability-name-container",Description:"ability-description",Cost:"bloontonium-cost",CostStroke:"bloontonium-cost-stroke"},be=document.getElementById("enable-ability-elements"),Ee=document.getElementById("ability-holder"),fe=document.getElementById("ability-options"),Be=document.getElementById("move-ability-up"),Ie=document.getElementById("move-ability-down"),ve=document.getElementById("is-passive-toggle"),Te=document.getElementById("input-ability-name"),xe=document.getElementById("input-ability-description"),ke=document.getElementById("input-bloontonium-cost"),Ce=document.getElementById("ability-img-btn");var we=[];const De={cardImg:document.getElementById("card-img"),abilityIcon:document.getElementById("ability-icon"),heroPortrait:document.getElementById("hero-portrait")};var Le=null;const $e=document.getElementById("card-damage"),Ae=document.getElementById("card-ammo"),Pe=document.getElementById("card-delay"),Oe=document.getElementById("damage-text-container"),Se=document.getElementById("ammo-text-container"),Ve=document.getElementById("delay-text-container"),Ne=document.getElementById("description-text"),Re=(document.getElementById("rarity-pin"),document.getElementById("hero-pin")),He=document.getElementById("class-pin"),Ue=document.createElement("canvas"),Me=Ue.getContext("2d");var Fe=null,je=null;const Ke=De.cardImg,We=512,ze={x:0,y:0,w:We,h:We};e("title-text",!0),e("class-text",!0),e("cost-text",!0),e("damage-text",!0),e("ammo-text",!0),e("delay-text",!0),e("description-text",!1),e("flavor-text",!1),e("hero-name",!0),t("ability-name",!0),t("bloontonium-cost",!0),t("ability-description",!1),Te.addEventListener("input",function(e){document.getElementById(`ability-option-${fe.value}`).textContent=Te.value,m(document.getElementById(`ability-name-container-${fe.value}`),1.225,35)}),document.getElementById("input-ability-description").addEventListener("input",function(e){m(document.getElementById(`ability-description-${fe.value}`),1.2,56)}),d("rarity-pin","RarityPin"),d("hero-pin","HeroPin"),d("class-pin","ClassPin"),r("x-input","x"),r("y-input","y"),s("w-input","w"),s("h-input","h"),(()=>{const e=document.getElementById("ratio-toggle");e.checked=!0,e.addEventListener("input",function(e){P()})})(),document.getElementById("input-description-text").addEventListener("input",function(e){m(Ne,3.2,c)}),(()=>{const e=document.getElementById("hero-name-container");document.getElementById("input-hero-name").addEventListener("input",function(t){m(e,2,41)})})(),(()=>{J.checked=!1,le.disabled=!0,ue.disabled=!0,ye.disabled=!0,ge.disabled=!0,ae.disabled=!0,le.value="Defender",z.style.justifyContent="center",ae.value="",ue.value=0;var e=!1;J.addEventListener("input",function(t){e!=J.checked&&(e=J.checked,ie.classList.toggle("disabled-text")),J.checked?(G.style.width="775px",Z.style.display="flex",le.disabled=!1,ue.disabled=!1,ye.disabled=!1,ge.disabled=!1,ae.disabled=!1,z.style.justifyContent=""):(G.style.width="375px",Z.style.display="none",le.disabled=!0,ue.disabled=!0,ye.disabled=!0,ge.disabled=!0,ae.disabled=!0,z.style.justifyContent="center")})})(),ve.checked=!1,ve.addEventListener("input",function(e){const t=document.getElementById(`ability-icon-button-${fe.value}`);ve.checked?t.src="/src/img/HeroCreator/PassiveAbilityButton.png":t.src="/src/img/HeroCreator/ActiveAbilityButton.png"}),(()=>{const e=document.getElementById("enable-portrait-toggle");e.checked=!0;const t=document.getElementById("hero-container");e.addEventListener("input",function(n){e.checked?(De.heroPortrait.style.display="",t.style.width="",Y.style.left="",Y.style.flex="",t.style.left=""):(De.heroPortrait.style.display="none",t.style.width="600px",Y.style.left="77px",Y.style.flex="0.74",t.style.left="auto")})})(),(()=>{const e=document.getElementById("bloontonium-toggle"),t=document.getElementsByClassName("cost"),n=document.getElementById("cost-text-container");e.checked=!1,e.addEventListener("input",function(o){let i="/src/img/CardIcon/Coin.png",l="4%";e.checked&&(i="/src/img/CardIcon/Bloontonium.png",l="5%");for(let e=0;e<t.length-1;e++)t[e].src=i,t[e].style.top=l;n.style.top=l})})(),fe.addEventListener("input",function(e){i()}),F.checked=!0,L.checked=!1,M.value=1,l(),(()=>{for(let t in p){var e=document.createElement("option");e.value=t,p[t].OptionTitle?e.textContent=p[t].OptionTitle:e.textContent=p[t].Title,le.add(e)}})(),globalThis.updateCardLayout=C,globalThis.setMonkeyStatVisibility=D,globalThis.addKeyword=()=>{let e=p[le.value].Description.replace("{VALUE}",ue.value);re.textContent=e;let t=p[le.value].Title.replace("{VALUE}",ue.value);se.textContent=t,me.textContent=t,de.src=`/src/img/Keyword/${le.value}.png`;let n=ce.cloneNode(!0);n.style.display="flex";let o=Q.appendChild(n);X.push(o),_.push({keyword:le.value,value:ue.value})},globalThis.removeKeyword=a,globalThis.resetImageValues=()=>{ze.x=0,ze.y=0,ze.w=We,ze.h=We,document.getElementById("x-input").value=0,document.getElementById("y-input").value=0,document.getElementById("w-input").value=100,document.getElementById("h-input").value=100,P()},globalThis.openUploadModal=e=>{const t=document.getElementById("uploadImgModal");Le=De[e],V(Le.src),u(t,!0)},globalThis.saveDraft=()=>{var e;const t=g[U].isHero;e=t?{Type:U,isHero:t,Title:N(!0,!1),Abilities:f(),PortraitEnabled:x("enable-portrait-toggle"),Image:document.getElementById("hero-portrait").src}:{Type:U,isHero:t,Title:N(!1,!1),Cost:B("input-cost-text"),Damage:B("input-damage-text"),Delay:B("input-delay-text"),Ammo:B("input-ammo-text"),Copies:B("copies-slider"),Class:B("input-class-text"),Rarity:B("rarity-pin-dropdown"),Hero:B("hero-pin-dropdown"),ClassPin:B("class-pin-dropdown"),Description:B("input-description-text"),Flavor:B("input-flavor-text"),hasDamage:x("damage-checkbox"),hasAmmo:x("temporary-toggle"),costsBloontonium:x("bloontonium-toggle"),isDetailsEnabled:x("detail-toggle"),Keywords:_,ImageTransform:[B("x-input"),B("y-input"),B("w-input"),B("h-input")],KeepRatio:x("ratio-toggle"),Image:Fe?Fe.src:null};const n=JSON.stringify(e);console.log(JSON.stringify(e));var o=document.createElement("a");const i=new Blob([n],{type:"application/json"});o.href=window.URL.createObjectURL(i),o.download=`bcs-draft-${N(t,!0)}`,document.body.appendChild(o),o.click(),document.body.removeChild(o)},globalThis.loadDraft=e=>{const t=e.target.files[0],a=new FileReader;a.onload=function(e){const t=JSON.parse(e.target.result);t.isHero?(e=>{C(e.Type),T("input-hero-name",e.Title),m(document.getElementById("hero-name-container"),2,41),k("enable-portrait-toggle",e.PortraitEnabled);const t=document.getElementById("hero-portrait");h(e.Image,t,"/src/img/HeroCreator/EmptyPortrait.png"),async function(e){for(;we.length>0;)o();for(let t in e){let o=1;for(;we.includes(o)||o<n(we);)o++;for(let e in pe)pe[e].id=`${he[e]}-${o}`;const a=e[t];let d=document.createElement("option");d.value=o,d.textContent=`Ability ${o}`,d.id=`ability-option-${o}`,fe.appendChild(d),pe.Name.textContent=a.Name,pe.NameStroke.textContent=a.Name,pe.Description.textContent=a.Description,pe.Element.style.order=`${o}`,pe.Cost.textContent=a.Cost,pe.CostStroke.textContent=a.Cost,pe.Button.src=a.Button;let r=new Promise(function(e){b(a.Icon,pe.Icon,e)});await r;let s=pe.Element.cloneNode(!0);s.style.display="flex",Ee.appendChild(s),fe.value=o;const c=pe.NameContainer.id,u=pe.Description.id;for(let e in pe)pe[e].id=`${he[e]}`;m(document.getElementById(c),1.225,35),m(document.getElementById(u),1.2,56),we.push(o),i(),l()}pe.Icon.src="/src/img/None.png"}(e.Abilities)})(t):(e=>{C(e.Type),T("input-title-text",e.Title),T("input-cost-text",e.Cost),T("input-damage-text",e.Damage),T("input-delay-text",e.Delay),T("input-ammo-text",e.Ammo),T("copies-slider",e.Copies),T("input-class-text",e.Class),T("rarity-pin-dropdown",e.Rarity),T("hero-pin-dropdown",e.Hero),T("class-pin-dropdown",e.ClassPin),T("input-description-text",e.Description),m(Ne,3.2,c),T("input-flavor-text",e.Flavor),k("damage-checkbox",e.hasDamage),k("temporary-toggle",e.hasAmmo),k("bloontonium-toggle",e.costsBloontonium),k("detail-toggle",e.isDetailsEnabled),D(),Fe=document.createElement("img"),h(e.Image,Fe),T("x-input",e.ImageTransform[0]),T("y-input",e.ImageTransform[1]),T("w-input",e.ImageTransform[2]),T("h-input",e.ImageTransform[3]),k("ratio-toggle",e.KeepRatio),P(),E(e.Keywords)})(t)},t.type.startsWith("application/json")&&a.readAsText(t)},globalThis.downloadImg=()=>{let e,t=g[U].isHero;t?(e=document.getElementById("hero-container"),e.style.height=`${Math.max(Y.offsetHeight+40,510)}px`):(e=document.getElementById("card-container"),J.checked?e.style.height=`${Math.max(Z.offsetHeight+40,510)}px`:e.style.height="510px"),html2canvas(e,{backgroundColor:null,useCORS:!0,scale:5}).then(function(e){let n=e.toDataURL("image/png");H(n,`bcs-${N(t,!0)}.png`)}),e.style.height="510px"},globalThis.downloadButtonMethod=H,globalThis.moveAbility=e=>{const t=fe.value,n=we.indexOf(Number(t)),o=n+e;if(console.log(we),o>=we.length||o<0)return;const i=we[o];console.log(`selected value: ${t}, moved value: ${i}`);const l=document.getElementById(`ability-element-${t}`),a=document.getElementById(`ability-element-${i}`),d=document.getElementById(`ability-option-${t}`),r=document.getElementById(`ability-option-${i}`);[l.style.order,a.style.order]=[a.style.order,l.style.order],[d.textContent,r.textContent]=[r.textContent,d.textContent],[d.value,r.value]=[r.value,d.value],[d.id,r.id]=[r.id,d.id],[we[n],we[o]]=[we[o],we[n]],fe.value=t},globalThis.addAbility=()=>{let e=1;for(;we.includes(e)||e<n(we);)e++;for(let t in pe)pe[t].id=`${he[t]}-${e}`;let t=document.createElement("option");t.value=e,t.textContent=`Ability ${e}`,t.id=`ability-option-${e}`,fe.appendChild(t),pe.Name.textContent=`Ability ${e}`,pe.NameStroke.textContent=`Ability ${e}`,pe.Description.textContent="Ability Description",pe.Element.style.order=`${e}`;let o=pe.Element.cloneNode(!0);o.style.display="flex",Ee.appendChild(o),fe.value=e;for(let e in pe)pe[e].id=`${he[e]}`;we.push(e),i(),l()},globalThis.removeAbility=o,globalThis.closeUploadModal=A,globalThis.uploadImgFromURL=()=>{const e=document.getElementById("url-input"),t=e.value.trim();if(t){e.value="";const n=document.createElement("img");n.crossOrigin="anonymous",n.src=t,n.onload=function(){V(t),Le==Ke?(Fe=n,P()):Le==De.abilityIcon?document.getElementById(`ability-icon-${fe.value}`).src=n.src:Le.src=n.src},n.onerror=function(){alert("Invalid image URL. Please check the link and try again.")}}},globalThis.uploadImg=e=>{const t=e.target.files[0],n=new FileReader;n.onload=function(e){const t=document.createElement("img");t.src=e.target.result,t.onload=function(){V(t.src),Le==Ke?(Fe=t,P()):Le==De.abilityIcon?document.getElementById(`ability-icon-${fe.value}`).src=t.src:Le.src=t.src}},t.type.startsWith("image/")&&n.readAsDataURL(t)}})();